<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pustakawan Digital | Online</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- GAYA TEMA (Sama seperti sebelum ini) --- */
        :root {
            --bg-body: #ECE9D8; --surface: #FFFFFF;
            --primary: #0053E1; --primary-light: #D3E5FF;
            --success: #4BA52E; --danger: #E53935; --danger-light: #FEE2E2;
            --text-main: #000000; --text-muted: #444444; --border: #8BA1C5;
            --radius-card: 8px; --radius-btn: 4px;
            --shadow-3d: 0 4px 6px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.4);
            --bg-weekend: #FFF8E1;
            --badge-active-bg: #D3E5FF; --badge-active-text: #003399; --badge-active-border: #A5B5D9;
            --badge-late-bg: #FEE2E2; --badge-late-text: #B71C1C; --badge-late-border: #E53935;
            --badge-done-bg: #E8F5E9; --badge-done-text: #2E7D32; --badge-done-border: #4BA52E;
        }
        [data-theme="dark"] {
            --bg-body: #202020; --surface: rgba(44, 44, 44, 0.7);
            --primary: #60CDFF; --primary-light: rgba(96, 205, 255, 0.15);
            --success: #6CCB5F; --danger: #FF99A4; --danger-light: rgba(255, 153, 164, 0.15);
            --text-main: #FFFFFF; --text-muted: #D0D0D0; --border: rgba(255, 255, 255, 0.1);
            --radius-card: 12px; --radius-btn: 6px;
            --shadow-3d: 0 8px 32px rgba(0, 0, 0, 0.3);
            --bg-weekend: rgba(255, 255, 255, 0.03);
            --badge-active-bg: rgba(96,205,255,0.2); --badge-active-text: #60CDFF; --badge-active-border: #60CDFF;
            --badge-late-bg: rgba(255,153,164,0.2); --badge-late-text: #FF99A4; --badge-late-border: #FF99A4;
            --badge-done-bg: rgba(108,203,95,0.2); --badge-done-text: #6CCB5F; --badge-done-border: #6CCB5F;
        }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg-body); color: var(--text-main); margin: 0; padding: 20px; transition: 0.3s; }
        
        /* Layout & Components */
        .container { max-width: 1200px; margin: 0 auto; }
        header { background: var(--surface); padding: 20px 30px; border-radius: var(--radius-card); border: 1px solid var(--border); display: flex; justify-content: space-between; margin-bottom: 25px; box-shadow: var(--shadow-3d); backdrop-filter: blur(10px); }
        .logo h1 { margin: 0; font-size: 1.8rem; font-weight: 800; text-transform: uppercase; }
        .logo span { color: var(--primary); }
        .btn-3d { background: var(--primary); color: white; padding: 10px 20px; border-radius: var(--radius-btn); border: 1px solid var(--border); cursor: pointer; font-weight: 600; transition: 0.2s; }
        .btn-3d:hover { filter: brightness(1.1); transform: translateY(-1px); }
        .btn-3d.secondary { background: var(--bg-body); color: var(--text-main); }
        
        /* Login */
        #loginView { display: flex; height: 90vh; justify-content: center; align-items: center; }
        .login-card { background: var(--surface); padding: 40px; border-radius: var(--radius-card); width: 350px; text-align: center; border: 1px solid var(--border); box-shadow: var(--shadow-3d); }
        .login-input { width: 100%; padding: 10px; margin-bottom: 15px; background: var(--bg-body); border: 1px solid var(--border); color: var(--text-main); border-radius: var(--radius-btn); box-sizing: border-box;}

        /* Dashboard */
        #dashboardView { display: none; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .stat-card { background: var(--surface); padding: 20px; border-radius: var(--radius-card); border: 1px solid var(--border); display: flex; align-items: center; gap: 15px; cursor: pointer; }
        .stat-value { font-size: 2rem; font-weight: 700; }
        
        /* Table */
        .content-card { background: var(--surface); border-radius: var(--radius-card); border: 1px solid var(--border); overflow: hidden; }
        .toolbar { padding: 15px; display: flex; gap: 10px; flex-wrap: wrap; background: var(--bg-body); }
        .search-container { flex: 1; display: flex; gap: 5px; }
        .search-input { flex: 1; padding: 8px; border-radius: var(--radius-btn); border: 1px solid var(--border); background: var(--surface); color: var(--text-main); }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 12px; background: var(--bg-body); color: var(--text-muted); font-size: 0.9rem; }
        td { padding: 12px; border-bottom: 1px solid var(--border); }
        
        /* Badges */
        .badge-btn { padding: 4px 10px; border-radius: 15px; font-size: 0.8rem; font-weight: bold; border: 1px solid transparent; }
        .badge-active { background: var(--badge-active-bg); color: var(--badge-active-text); border-color: var(--badge-active-border); }
        .badge-late { background: var(--badge-late-bg); color: var(--badge-late-text); border-color: var(--badge-late-border); }
        .badge-done { background: var(--badge-done-bg); color: var(--badge-done-text); border-color: var(--badge-done-border); }

        /* Modal */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; backdrop-filter: blur(5px); z-index: 1000; }
        .modal-overlay.open { display: flex; }
        .modal { background: var(--surface); width: 100%; max-width: 600px; padding: 25px; border-radius: var(--radius-card); border: 1px solid var(--border); }
        .grid-compact { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .col-full { grid-column: span 2; }
        .form-group label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 5px; }
        .form-group input, .form-group select { width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: var(--radius-btn); background: var(--bg-body); color: var(--text-main); box-sizing: border-box; }

        /* Loader */
        #loadingBar { position: fixed; top: 0; left: 0; width: 100%; height: 3px; background: linear-gradient(90deg, var(--primary), var(--success)); z-index: 9999; display: none; }
        
        @media (max-width: 768px) { .stats-grid, .grid-compact { grid-template-columns: 1fr; } .col-full { grid-column: span 1; } header { flex-direction: column; text-align: center; gap: 15px; } }
    </style>
</head>
<body>

<div id="loadingBar"></div>

<!-- Login -->
<div id="loginView">
    <div class="login-card">
        <h1 style="color: var(--primary);">üìö PUSTAKA CLOUD</h1>
        <p>Log masuk untuk akses pangkalan data</p>
        <input type="text" class="login-input" placeholder="ID Pengguna" value="admin">
        <input type="password" class="login-input" placeholder="Kata Laluan" value="1234">
        <button class="btn-3d" style="width: 100%;" onclick="login()">Log Masuk</button>
        <br><br>
        <button class="btn-3d secondary" style="width: 100%;" onclick="toggleTheme()">üåô Tukar Tema</button>
        <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 20px;">Versi 4.0 (Firebase Online)</p>
    </div>
</div>

<!-- Dashboard -->
<div id="dashboardView">
    <div class="container">
        <header>
            <div class="logo">
                <h1>PUSTAKA <span>ONLINE</span></h1>
                <p style="margin: 5px 0 0; color: var(--text-muted);">Sistem Pengurusan Pinjaman Berasaskan Awan</p>
            </div>
            <div>
                <div id="headerDate" style="font-weight: bold; color: var(--primary); text-align: right;"></div>
                <div style="text-align: right; margin-top: 10px;">
                    <button class="btn-3d secondary" onclick="toggleTheme()">üåô</button>
                    <button class="btn-3d" onclick="openModal()">‚ûï Rekod</button>
                </div>
            </div>
        </header>

        <div class="stats-grid">
            <div class="stat-card" onclick="filterList('aktif')">
                <div style="font-size: 2rem;">üìñ</div>
                <div>
                    <h3>Sedang Dipinjam</h3>
                    <div class="stat-value" style="color: var(--primary);" id="statActive">...</div>
                </div>
            </div>
            <div class="stat-card" onclick="filterList('lewat')">
                <div style="font-size: 2rem;">‚ö†Ô∏è</div>
                <div>
                    <h3>Lewat / >14 Hari</h3>
                    <div class="stat-value" style="color: var(--danger);" id="statLate">...</div>
                </div>
            </div>
            <div class="stat-card">
                <div style="font-size: 2rem;">üí∞</div>
                <div>
                    <h3>Kutipan Denda</h3>
                    <div class="stat-value" style="color: #F59E0B;" id="statFine">...</div>
                </div>
            </div>
        </div>

        <div class="content-card">
            <div class="toolbar">
                <div class="search-container">
                    <input type="text" id="searchInput" class="search-input" placeholder="Cari nama, tajuk..." onkeyup="renderTable()">
                    <button class="btn-3d secondary" onclick="document.getElementById('searchInput').value=''; renderTable();">‚ùå</button>
                </div>
                <button onclick="logout()" class="btn-3d secondary" style="border-color: var(--danger); color: var(--danger);">Keluar</button>
            </div>
            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>Peminjam</th>
                            <th>Bahan / Tajuk</th>
                            <th>Tarikh & Tempoh</th>
                            <th>Status</th>
                            <th>Tindakan</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr><td colspan="5" style="text-align:center;">Sedang memuatkan data dari awan...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal Rekod -->
<div class="modal-overlay" id="recordModal">
    <div class="modal">
        <div style="display:flex; justify-content:space-between; margin-bottom: 20px;">
            <h3 style="margin:0;">Maklumat Pinjaman</h3>
            <button onclick="closeModal()" style="background:none; border:none; font-size:1.5rem; cursor:pointer; color:var(--text-muted);">&times;</button>
        </div>
        
        <input type="hidden" id="docId"> <!-- ID Firestore -->

        <div class="grid-compact">
            <div class="form-group col-full"><label>Nama</label><input type="text" id="f_nama"></div>
            <div class="form-group"><label>No. Ahli</label><input type="text" id="f_noPekerja"></div>
            <div class="form-group"><label>Kategori</label><select id="f_jenis"><option>Buku</option><option>Fail</option><option>Majalah</option><option>Alat</option></select></div>
            <div class="form-group col-full"><label>Tajuk</label><input type="text" id="f_tajuk"></div>
            
            <div class="form-group">
                <label>WhatsApp</label>
                <div style="display:flex;">
                    <input type="text" id="f_whatsapp">
                    <a id="btnWA" href="#" target="_blank" style="display:none; margin-left:5px; text-decoration:none; font-size:1.2rem;">üü¢</a>
                </div>
            </div>
            
            <div class="form-group"><label>Tarikh Pinjam</label><input type="date" id="f_tPinjam" onchange="calcDays()"></div>
            <div class="form-group"><label>Tkh Pulang Asal</label><input type="date" id="f_tPulang" onchange="calcDays()"></div>
            <div class="form-group"><label>Tkh Pulang Sebenar</label><input type="date" id="f_tDipulangkan" onchange="calcDays()"></div>
            
            <div class="form-group col-full" style="background: var(--bg-body); padding:10px; border-radius:4px;">
                <label>Status:</label>
                <label style="margin-right:15px;"><input type="radio" name="status" value="Dipinjam" checked onclick="toggleReturnDate(false); calcDays();"> Belum Pulang</label>
                <label><input type="radio" name="status" value="Selesai" onclick="toggleReturnDate(true); calcDays();"> Sudah Pulang</label>
            </div>
        </div>

        <div style="margin-top:15px; font-weight:bold; text-align:center; color: var(--primary);" id="calcResult"></div>

        <div style="margin-top:20px; display:flex; gap:10px;">
            <button id="btnDelete" onclick="deleteData()" class="btn-3d" style="background: var(--danger); display:none;">Hapus</button>
            <button onclick="saveData()" class="btn-3d" style="flex:1;">Simpan</button>
        </div>
    </div>
</div>

<!-- LIBRARY FIREBASE -->
<script type="module">
    // --- 1. IMPORT FIREBASE ---
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // --- 2. KONFIGURASI FIREBASE (GANTI DI SINI) ---
    // Sila tampal konfigurasi dari Firebase Console anda di sini
    const firebaseConfig = {
        apiKey: "GANTIKAN_DENGAN_API_KEY_ANDA",
        authDomain: "PROJECT_ID.firebaseapp.com",
        projectId: "PROJECT_ID",
        storageBucket: "PROJECT_ID.appspot.com",
        messagingSenderId: "SENDER_ID",
        appId: "APP_ID"
    };

    // Initialize Firebase
    let db;
    try {
        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        console.log("Firebase bersambung!");
    } catch (e) {
        console.error("Sila masukkan config Firebase yang sah.", e);
        alert("Sila masukkan konfigurasi Firebase dalam kod HTML untuk menyambung.");
    }

    // Global variable untuk data tempatan (untuk carian pantas)
    window.localData = [];

    // --- 3. FUNGSI DATABASE (CRUD) ---

    // READ (Real-time listener)
    window.loadData = function() {
        document.getElementById('loadingBar').style.display = 'block';
        if(!db) return;

        // Dengar perubahan pada collection 'pinjaman'
        const unsub = onSnapshot(collection(db, "pinjaman"), (snapshot) => {
            window.localData = snapshot.docs.map(doc => ({
                id: doc.id,
                ...doc.data()
            }));
            
            // Susun ikut tarikh pinjam terkini
            window.localData.sort((a, b) => new Date(b.tPinjam) - new Date(a.tPinjam));
            
            renderTable();
            updateStats();
            document.getElementById('loadingBar').style.display = 'none';
        }, (error) => {
            console.log("Error:", error);
            document.getElementById('loadingBar').style.display = 'none';
        });
    }

    // CREATE & UPDATE
    window.saveData = async function() {
        const docId = document.getElementById('docId').value;
        const data = {
            nama: document.getElementById('f_nama').value,
            noPekerja: document.getElementById('f_noPekerja').value,
            jenis: document.getElementById('f_jenis').value,
            tajuk: document.getElementById('f_tajuk').value,
            whatsapp: document.getElementById('f_whatsapp').value,
            tPinjam: document.getElementById('f_tPinjam').value,
            tPulang: document.getElementById('f_tPulang').value, // Due Date
            tDipulangkan: document.getElementById('f_tDipulangkan').value, // Actual Return
            status: document.querySelector('input[name="status"]:checked').value === 'Selesai' 
                    ? 'Selesai - Telah Dipulangkan' : 'Dipinjam',
            denda: calculateFineValue() // Kira denda sebelum simpan
        };

        if(!data.nama || !data.tajuk) return alert("Sila isi Nama dan Tajuk.");

        document.getElementById('loadingBar').style.display = 'block';
        try {
            if (docId) {
                // UPDATE
                await updateDoc(doc(db, "pinjaman", docId), data);
            } else {
                // CREATE
                await addDoc(collection(db, "pinjaman"), data);
            }
            closeModal();
        } catch (e) {
            alert("Ralat menyimpan: " + e.message);
        }
        document.getElementById('loadingBar').style.display = 'none';
    }

    // DELETE
    window.deleteData = async function() {
        const docId = document.getElementById('docId').value;
        if (!docId) return;
        
        if (confirm("Adakah anda pasti mahu memadam rekod ini secara kekal dari Cloud?")) {
            document.getElementById('loadingBar').style.display = 'block';
            await deleteDoc(doc(db, "pinjaman", docId));
            document.getElementById('loadingBar').style.display = 'none';
            closeModal();
        }
    }

    // Helper: Kira nilai denda untuk disimpan
    function calculateFineValue() {
        const tPinjam = document.getElementById('f_tPinjam').value;
        const status = document.querySelector('input[name="status"]:checked').value;
        const tDipulangkan = document.getElementById('f_tDipulangkan').value;
        
        let endDate = (status === 'Selesai' && tDipulangkan) ? new Date(tDipulangkan) : new Date();
        endDate.setHours(0,0,0,0);
        
        const startDate = new Date(tPinjam);
        startDate.setHours(0,0,0,0);
        
        const diffTime = endDate - startDate;
        const days = Math.round(diffTime / (1000 * 60 * 60 * 24));
        const overdue = days - 14;
        
        return overdue > 0 ? (overdue * 0.20).toFixed(2) : "0.00";
    }

    // Start App after Login
    window.initApp = function() {
        setupDateDisplay();
        loadData();
    }

</script>

<script>
    // --- UI LOGIC (Non-Module) ---
    
    function login() {
        document.getElementById('loginView').style.display = 'none';
        document.getElementById('dashboardView').style.display = 'block';
        if(window.initApp) window.initApp(); // Panggil fungsi module
    }

    function logout() {
        document.getElementById('dashboardView').style.display = 'none';
        document.getElementById('loginView').style.display = 'flex';
    }

    // --- RENDER TABLE ---
    let currentFilter = 'all';

    function renderTable() {
        const tbody = document.getElementById('tableBody');
        const search = document.getElementById('searchInput').value.toLowerCase();
        
        tbody.innerHTML = '';
        
        if(!window.localData || window.localData.length === 0) {
            tbody.innerHTML = '<tr><td colspan="5" style="text-align:center; padding:20px;">Tiada rekod dijumpai.</td></tr>';
            return;
        }

        window.localData.forEach(item => {
            // Filter Search
            const text = (item.nama + item.noPekerja + item.tajuk).toLowerCase();
            if (search && !text.includes(search)) return;

            // Logic Kiraan Hari (UI)
            const days = getDays(item.tPinjam, item.status.includes('Selesai') ? item.tDipulangkan : null);
            const isLate = days > 14;

            // Filter Tabs
            if (currentFilter === 'aktif' && item.status.includes('Selesai')) return;
            if (currentFilter === 'lewat' && !isLate) return;

            // Badge UI
            let badge = '';
            if (item.status.includes('Selesai')) {
                badge = `<span class="badge-btn badge-done">Selesai ${item.denda > 0 ? '(RM'+item.denda+')' : ''}</span>`;
            } else if (isLate) {
                badge = `<span class="badge-btn badge-late">Lewat (${days - 14} hari)</span>`;
            } else {
                badge = `<span class="badge-btn badge-active">Aktif</span>`;
            }

            const row = `
                <tr>
                    <td><strong>${item.nama}</strong><br><small style="color:var(--text-muted)">${item.noPekerja}</small></td>
                    <td>${item.tajuk}<br><small class="badge-btn" style="background:var(--bg-body); font-weight:normal;">${item.jenis}</small></td>
                    <td>
                        <div style="font-size:0.85rem">Pinjam: ${formatDate(item.tPinjam)}</div>
                        <div style="font-size:0.85rem">Pulang: ${formatDate(item.tPulang)}</div>
                        <div style="font-weight:bold; color:${isLate ? 'var(--danger)' : 'var(--success)'}; font-size:0.8rem;">
                            ‚è≥ ${days} Hari Pegangan
                        </div>
                    </td>
                    <td>${badge}</td>
                    <td style="text-align:right;">
                        <button class="btn-3d secondary" style="padding:5px 10px;" onclick='editRecord("${item.id}")'>‚úèÔ∏è</button>
                    </td>
                </tr>
            `;
            tbody.innerHTML += row;
        });
    }

    function filterList(type) {
        currentFilter = type; // 'all', 'aktif', 'lewat'
        renderTable();
    }

    // --- MODAL LOGIC ---
    function openModal() {
        // Reset Form
        document.getElementById('docId').value = '';
        document.querySelectorAll('.modal input').forEach(i => i.value = '');
        
        // Set Default Dates
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('f_tPinjam').value = today;
        
        const due = new Date(); due.setDate(due.getDate() + 14);
        document.getElementById('f_tPulang').value = due.toISOString().split('T')[0];
        
        // UI Reset
        document.querySelector('input[name="status"][value="Dipinjam"]').checked = true;
        document.getElementById('btnDelete').style.display = 'none';
        toggleReturnDate(false);
        calcDays();
        
        document.getElementById('recordModal').classList.add('open');
    }

    function editRecord(id) {
        const item = window.localData.find(x => x.id === id);
        if(!item) return;

        document.getElementById('docId').value = id;
        document.getElementById('f_nama').value = item.nama;
        document.getElementById('f_noPekerja').value = item.noPekerja;
        document.getElementById('f_jenis').value = item.jenis;
        document.getElementById('f_tajuk').value = item.tajuk;
        document.getElementById('f_whatsapp').value = item.whatsapp;
        document.getElementById('f_tPinjam').value = item.tPinjam;
        document.getElementById('f_tPulang').value = item.tPulang;
        document.getElementById('f_tDipulangkan').value = item.tDipulangkan || '';

        const isSelesai = item.status.includes('Selesai');
        document.querySelector(`input[name="status"][value="${isSelesai ? 'Selesai' : 'Dipinjam'}"]`).checked = true;
        
        toggleReturnDate(isSelesai);
        calcDays();

        // Button WA
        const btnWA = document.getElementById('btnWA');
        if(item.whatsapp) {
            btnWA.style.display = 'inline';
            btnWA.href = `https://wa.me/${item.whatsapp}`;
        } else {
            btnWA.style.display = 'none';
        }

        document.getElementById('btnDelete').style.display = 'inline-block';
        document.getElementById('recordModal').classList.add('open');
    }

    function closeModal() { document.getElementById('recordModal').classList.remove('open'); }

    // --- CALCULATIONS ---
    function toggleReturnDate(show) {
        const input = document.getElementById('f_tDipulangkan');
        if(show) {
            input.parentElement.style.display = 'block';
            if(!input.value) input.value = new Date().toISOString().split('T')[0];
        } else {
            input.parentElement.style.display = 'none';
            input.value = '';
        }
    }

    function getDays(startStr, endStr) {
        const start = new Date(startStr);
        const end = endStr ? new Date(endStr) : new Date();
        start.setHours(0,0,0,0); end.setHours(0,0,0,0);
        return Math.round((end - start) / (1000 * 60 * 60 * 24));
    }

    function calcDays() {
        const start = document.getElementById('f_tPinjam').value;
        const endInput = document.getElementById('f_tDipulangkan').value;
        const isSelesai = document.querySelector('input[name="status"]:checked').value === 'Selesai';
        
        if(!start) return;

        const days = getDays(start, isSelesai ? endInput : null);
        const overdue = days - 14;
        const denda = overdue > 0 ? (overdue * 0.20).toFixed(2) : "0.00";

        const res = document.getElementById('calcResult');
        if (overdue > 0) {
            res.innerHTML = `‚ö†Ô∏è Tempoh: ${days} Hari (Lebih ${overdue} hari) | Denda: RM ${denda}`;
            res.style.color = 'var(--danger)';
        } else {
            res.innerHTML = `‚úÖ Tempoh: ${days} Hari (Dalam Had 14 Hari)`;
            res.style.color = 'var(--success)';
        }
    }

    function updateStats() {
        let active=0, late=0, fine=0;
        window.localData.forEach(i => {
            if(!i.status.includes('Selesai')) {
                active++;
                if(getDays(i.tPinjam, null) > 14) late++;
            }
            // Kira denda bulan semasa (optional logic)
            if(i.denda) fine += parseFloat(i.denda);
        });
        document.getElementById('statActive').innerText = active;
        document.getElementById('statLate').innerText = late;
        document.getElementById('statFine').innerText = 'RM ' + fine.toFixed(2);
    }

    function formatDate(d) { if(!d) return '-'; let p=d.split('-'); return `${p[2]}/${p[1]}/${p[0]}`; }
    
    function setupDateDisplay() {
        const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
        const dateStr = new Date().toLocaleDateString('ms-MY', options);
        document.getElementById('headerDate').innerText = dateStr;
        document.getElementById('loginDate').innerText = dateStr;
    }

    // Theme Toggle
    function toggleTheme() {
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
    }
</script>
</body>
</html>